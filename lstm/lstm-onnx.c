// This file is computer-generated by onnx2c 
// (TODO: add creating command line here)
// (TODO: print creation date here )

// ONNX model:
// produced by onnx-lstm, version 
// ONNX IR version: 17
// Model documentation: 
/*

*/

#include <float.h>
#include <math.h>
#include <stdbool.h>
#include <stdint.h>
#include <string.h>
#define MAX(X,Y) ( X > Y ? X : Y)
#define MIN(X,Y) ( X < Y ? X : Y)
#define CLIP(X,L) ( MAX(MIN(X,L), -L) )


static const float tensor_W[1][40][1] = 
{
  {
    {0.59285062551498413086f},
    {0.18926943838596343994f},
    {-0.24756577610969543457f},
    {-0.055931475013494491577f},
    {0.49171608686447143555f},
    {0.47097188234329223633f},
    {-1.7565879821777343750f},
    {0.71270602941513061523f},
    {-0.71067589521408081055f},
    {-1.4752897024154663086f},
    {-0.10348239541053771973f},
    {1.4731940031051635742f},
    {-0.21656230092048645020f},
    {1.2301185131072998047f},
    {0.75958985090255737305f},
    {-1.9773982763290405273f},
    {-0.96883893013000488281f},
    {-0.81704968214035034180f},
    {-0.32601472735404968262f},
    {0.12953229248523712158f},
    {0.23159399628639221191f},
    {0.83664381504058837891f},
    {0.097566790878772735596f},
    {-0.28136610984802246094f},
    {-1.7280949354171752930f},
    {0.44128865003585815430f},
    {1.4708594083786010742f},
    {-1.0570305585861206055f},
    {-0.22765150666236877441f},
    {-1.3661493062973022461f},
    {-0.036765225231647491455f},
    {-1.2042528390884399414f},
    {1.3713110685348510742f},
    {1.8230950832366943359f},
    {0.15329131484031677246f},
    {0.011096744798123836517f},
    {1.4674570560455322266f},
    {0.22578068077564239502f},
    {-0.86856812238693237305f},
    {-0.77643018960952758789f}
  }
};
static const float tensor_R[1][40][10] = 
{
  {
    {-0.91163468360900878906f, -0.48735997080802917480f, 0.11797494441270828247f, -0.51548749208450317383f, 0.038673780858516693115f, -0.19733746349811553955f, -0.66234397888183593750f, -1.3406985998153686523f, 1.2911812067031860352f, -2.4558823108673095703f},
    {0.065740957856178283691f, 1.1121416091918945312f, 0.13789734244346618652f, 1.4996647834777832031f, -0.78823798894882202148f, 1.0073726177215576172f, -4.6703485168109182268e-06f, -0.78488153219223022461f, 0.64174050092697143555f, -0.22672028839588165283f},
    {1.8315334320068359375f, -1.4289641380310058594f, 0.050871957093477249146f, 1.0086002349853515625f, -0.66245645284652709961f, 1.2793289422988891602f, -0.64287990331649780273f, 0.45135667920112609863f, 0.74303942918777465820f, 0.76520764827728271484f},
    {-1.3289252519607543945f, -0.65932524204254150391f, -0.93430697917938232422f, -0.098149016499519348145f, -1.5100704431533813477f, 0.030857935547828674316f, 0.88499647378921508789f, -1.0517200231552124023f, -1.5566358566284179688f, 0.52750653028488159180f},
    {0.37036255002021789551f, 1.5409507751464843750f, 0.65761214494705200195f, -1.2412469387054443359f, -0.59536468982696533203f, -0.55144202709197998047f, 0.25216180086135864258f, 1.1345069408416748047f, -0.52849751710891723633f, -0.76710098981857299805f},
    {-0.81236642599105834961f, 0.42910021543502807617f, 0.21425488591194152832f, 0.51312798261642456055f, -0.10090954601764678955f, 0.22008220851421356201f, -1.1162713766098022461f, -0.22646139562129974365f, 0.85705113410949707031f, -0.65169042348861694336f},
    {0.027219159528613090515f, -0.74110132455825805664f, -0.36114740371704101562f, 0.37556022405624389648f, 1.2941534519195556641f, 0.25548282265663146973f, -0.35857632756233215332f, 0.63390123844146728516f, -0.59855610132217407227f, 2.9861552715301513672f},
    {-1.2138732671737670898f, 1.9674446582794189453f, -0.64573043584823608398f, 0.87186646461486816406f, -0.33407562971115112305f, -1.0993305444717407227f, 0.23739375174045562744f, -0.67625039815902709961f, 0.69467872381210327148f, -0.19011348485946655273f},
    {-0.76918846368789672852f, -1.3853666782379150391f, -0.35633015632629394531f, 0.35889247059822082520f, -0.82637369632720947266f, -0.12129011750221252441f, 0.023261221125721931458f, 1.6627509593963623047f, 0.31047183275222778320f, -0.45369526743888854980f},
    {0.013090438209474086761f, 0.24080060422420501709f, -0.44581285119056701660f, 1.6075539588928222656f, 1.7117537260055541992f, 0.87800216674804687500f, 0.44835352897644042969f, 0.053718771785497665405f, -1.3122777938842773438f, 0.71827119588851928711f},
    {0.54418706893920898438f, -0.078399449586868286133f, -0.46449738740921020508f, -0.76480787992477416992f, 1.5161609649658203125f, -3.1568818092346191406f, 1.3895186185836791992f, -0.87173396348953247070f, 1.6609840393066406250f, 0.62429672479629516602f},
    {1.8590216636657714844f, -0.43265900015830993652f, 1.3113437891006469727f, -0.42139559984207153320f, 1.1891540288925170898f, -1.2986764907836914062f, 0.14764431118965148926f, -0.34304067492485046387f, -0.60274451971054077148f, -0.54537624120712280273f},
    {-0.34896469116210937500f, -0.46311977505683898926f, -0.12222982197999954224f, 0.31526902318000793457f, 0.81285893917083740234f, 1.0349358320236206055f, -0.47130292654037475586f, -2.0457854270935058594f, 1.3413513898849487305f, -0.46579572558403015137f},
    {-1.3457347154617309570f, 0.84802913665771484375f, -0.53048586845397949219f, -0.46776771545410156250f, 1.3664138317108154297f, -0.21215580403804779053f, 0.93136727809906005859f, 1.5416986942291259766f, 0.61408132314682006836f, -0.63339883089065551758f},
    {-1.8304921388626098633f, 1.1923015117645263672f, 0.22668786346912384033f, 0.29768168926239013672f, 1.1134148836135864258f, -0.59779691696166992188f, -0.024086590856313705444f, -1.0428279638290405273f, 1.0472099781036376953f, -1.4528530836105346680f},
    {0.098590664565563201904f, -1.2570660114288330078f, -0.38140901923179626465f, -0.86059039831161499023f, 0.63313615322113037109f, 0.40157580375671386719f, 0.55338722467422485352f, -0.36167344450950622559f, -0.36813193559646606445f, -1.8655463457107543945f},
    {-0.75634723901748657227f, 1.1724135875701904297f, -0.0094820596277713775635f, -0.25415632128715515137f, 0.64866781234741210938f, 0.55916726589202880859f, -1.2663590908050537109f, -1.3347951173782348633f, -0.31455087661743164062f, 1.9543259143829345703f},
    {0.15923243761062622070f, 0.20288436114788055420f, -0.40762093663215637207f, -0.81555527448654174805f, -0.26043730974197387695f, -0.13159187138080596924f, -1.6017503738403320312f, 0.87950980663299560547f, 1.9439474344253540039f, -0.23125341534614562988f},
    {-0.52379870414733886719f, 0.41201901435852050781f, 0.12465089559555053711f, -0.52352100610733032227f, 0.27502351999282836914f, -1.6861541271209716797f, -1.2866975069046020508f, 1.8235291242599487305f, 0.89656609296798706055f, -0.60152077674865722656f},
    {2.0818486213684082031f, 0.40550985932350158691f, -1.6506462097167968750f, 0.33743900060653686523f, -2.6124713420867919922f, 0.70438408851623535156f, 1.2083386182785034180f, 0.60368204116821289062f, 0.11988042294979095459f, 0.99671769142150878906f},
    {0.30922713875770568848f, 1.2992171049118041992f, -0.49957346916198730469f, 1.6857932806015014648f, 0.060662131756544113159f, 1.0220377445220947266f, -2.2595391273498535156f, 0.73064434528350830078f, -0.038027577102184295654f, -0.78282618522644042969f},
    {-0.98923689126968383789f, -1.8319005966186523438f, 1.1755919456481933594f, 1.0056673288345336914f, 0.59229046106338500977f, 1.5649288892745971680f, 1.5137056112289428711f, -1.3888196945190429688f, -0.22027377784252166748f, 1.4049236774444580078f},
    {0.11285292357206344604f, 0.77418911457061767578f, -0.22060947120189666748f, -0.30315816402435302734f, 0.33475789427757263184f, -0.30483478307723999023f, 1.3150385618209838867f, -0.76492655277252197266f, -1.2482261657714843750f, 0.21219678223133087158f},
    {0.65688973665237426758f, -0.10887579619884490967f, -1.4814922809600830078f, -0.37443047761917114258f, 0.39310678839683532715f, -0.26847222447395324707f, -0.15138228237628936768f, 0.49134391546249389648f, -0.60300743579864501953f, 0.83192330598831176758f},
    {-0.20861415565013885498f, -0.34942352771759033203f, 1.7431539297103881836f, 0.55317783355712890625f, 1.8667787313461303711f, 0.63332808017730712891f, 0.19561553001403808594f, 1.3815827369689941406f, 1.3622623682022094727f, 0.048159562051296234131f},
    {-0.74523729085922241211f, -1.6681796312332153320f, 1.0411486625671386719f, 0.22194725275039672852f, 1.0550068616867065430f, 0.052762750536203384399f, -0.098638847470283508301f, 1.5319919586181640625f, 0.50063955783843994141f, 1.1898388862609863281f},
    {-1.0384082794189453125f, 1.0400130748748779297f, -1.7022753953933715820f, 1.5872328281402587891f, -0.60291361808776855469f, -0.55662053823471069336f, 0.66520315408706665039f, -1.7699316740036010742f, -0.15206067264080047607f, 0.13021346926689147949f},
    {-0.59820485115051269531f, -0.86684578657150268555f, -0.35249537229537963867f, 0.65018129348754882812f, -1.4126383066177368164f, 0.19234605133533477783f, 0.79212003946304321289f, 0.47825273871421813965f, -0.63219058513641357422f, 0.30102330446243286133f},
    {1.1668335199356079102f, -2.1232311725616455078f, 0.26823720335960388184f, -0.32709518074989318848f, 0.021738756448030471802f, -0.20481023192405700684f, -0.037126593291759490967f, -1.8477095365524291992f, -0.21536310017108917236f, -0.85482496023178100586f},
    {0.35257154703140258789f, 1.9440940618515014648f, -1.1959830522537231445f, 0.77027541399002075195f, 0.95266300439834594727f, -0.10081811994314193726f, 0.87479585409164428711f, -0.88030475378036499023f, -2.4226868152618408203f, 0.064601577818393707275f},
    {0.052890934050083160400f, -0.95244103670120239258f, -0.61600965261459350586f, 0.29671669006347656250f, 1.0587273836135864258f, -0.31932264566421508789f, 0.048044331371784210205f, -0.50668662786483764648f, 0.24306519329547882080f, 0.27837851643562316895f},
    {-1.2295643091201782227f, -0.84908676147460937500f, 0.30197501182556152344f, 0.066539019346237182617f, -0.14915969967842102051f, -1.1508780717849731445f, 0.11379387229681015015f, -0.31782266497611999512f, -0.95069056749343872070f, 1.8674353361129760742f},
    {1.3594079017639160156f, 0.020789504051208496094f, -0.70588451623916625977f, -1.4205874204635620117f, -1.4188194274902343750f, 0.32300958037376403809f, 1.1853760480880737305f, -1.5909218788146972656f, -0.93862342834472656250f, 0.46571618318557739258f},
    {-0.43339160084724426270f, 1.5018599033355712891f, -0.28694123029708862305f, 0.46349728107452392578f, -0.37711745500564575195f, 0.38182505965232849121f, 2.6578712463378906250f, -0.99695229530334472656f, 0.58905476331710815430f, 0.096609339118003845215f},
    {-0.80466502904891967773f, -1.9251855611801147461f, 0.37771844863891601562f, 0.00086246669525280594826f, -0.23204654455184936523f, -1.2596404552459716797f, -1.1094667911529541016f, -0.46624618768692016602f, -0.57977199554443359375f, 0.65474945306777954102f},
    {0.31434208154678344727f, -0.94602501392364501953f, 1.4671189785003662109f, -0.39498394727706909180f, 0.81713253259658813477f, 0.10233624279499053955f, -0.94636607170104980469f, 0.20931939780712127686f, -0.62937670946121215820f, 1.6233816146850585938f},
    {-0.14656662940979003906f, 0.068494714796543121338f, -1.2067466974258422852f, 0.58672094345092773438f, -0.63253486156463623047f, -0.41990298032760620117f, -1.4779794216156005859f, 0.37009209394454956055f, 1.3392614126205444336f, -0.42390301823616027832f},
    {1.9848062992095947266f, -0.77752321958541870117f, 1.5778350830078125000f, 0.81480014324188232422f, 0.13405576348304748535f, -0.16263245046138763428f, -0.32130512595176696777f, -1.4918643236160278320f, -0.53710854053497314453f, -0.22292476892471313477f},
    {0.37564629316329956055f, -0.34274825453758239746f, -0.83625596761703491211f, 0.39056131243705749512f, -0.21766206622123718262f, 1.1534048318862915039f, -1.3309156894683837891f, -2.2513964176177978516f, 0.27402898669242858887f, 0.88870292901992797852f},
    {-2.0389013290405273438f, 0.29241812229156494141f, 1.0218659639358520508f, -0.16868495941162109375f, 0.58478456735610961914f, -0.34940510988235473633f, -1.1738477945327758789f, -1.0247789621353149414f, -1.0446748733520507812f, 1.2218394279479980469f}
  }
};
static const float tensor_B[1][80] = 
{
  {0.92273902893066406250f, 0.56724321842193603516f, -0.90641915798187255859f, 0.50910300016403198242f, -0.72152513265609741211f, 0.026203166693449020386f, -0.48713502287864685059f, -1.2439900636672973633f, 0.11309628933668136597f, -0.77796703577041625977f, -0.85501098632812500000f, -0.71910697221755981445f, -0.057643059641122817993f, -1.3347239494323730469f, 0.45188939571380615234f, 0.85336410999298095703f, -0.48627567291259765625f, 0.78308552503585815430f, 0.062437154352664947510f, -0.57683396339416503906f, 1.0916181802749633789f, -0.35204851627349853516f, -0.29918405413627624512f, -2.0118260383605957031f, 0.47352811694145202637f, -0.52811950445175170898f, -0.49290102720260620117f, -1.0258787870407104492f, -0.92033338546752929688f, -1.4977040290832519531f, -0.80150121450424194336f, -0.98527824878692626953f, 0.12586519122123718262f, 0.56119388341903686523f, 1.4597249031066894531f, 0.55297392606735229492f, 1.6433030366897583008f, 0.88582921028137207031f, 0.018708275631070137024f, -3.1735374927520751953f, 0.48628923296928405762f, -0.66513186693191528320f, 0.52310121059417724609f, -0.087905824184417724609f, -1.3190842866897583008f, -1.5466110706329345703f, -0.17468677461147308350f, 0.11981922388076782227f, -0.098252825438976287842f, -0.059575479477643966675f, -0.047030679881572723389f, -0.25805148482322692871f, 0.86757504940032958984f, -1.4114593267440795898f, -0.065579049289226531982f, 0.87102085351943969727f, -0.61592060327529907227f, -0.53679484128952026367f, 0.25696572661399841309f, 1.7456626892089843750f, 0.082304522395133972168f, -0.24548718333244323730f, -1.2535214424133300781f, -0.93496346473693847656f, 1.4921789169311523438f, -2.3886260986328125000f, 0.64364510774612426758f, -0.70320445299148559570f, 0.62501227855682373047f, -0.21070022881031036377f, -0.079143062233924865723f, 1.1571878194808959961f, 1.8488496541976928711f, 0.73229694366455078125f, -0.16332499682903289795f, 0.31888535618782043457f, 0.79066914319992065430f, 0.33814385533332824707f, -0.71681404113769531250f, -1.9441781044006347656f}
};
static float tensor_Y_h[1][1][10] = 
{
  {
    {0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f}
  }
};
static float tensor_Y_c[1][1][10] = 
{
  {
    {0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f, 0.0000000000000000000f}
  }
};
union tensor_union_0 {
float tensor_Y[10][1][1][10];
};
static union tensor_union_0 tu0;


static inline void node_anonymous_LSTM_0( const float X[10][1][1], const float W[1][40][1], const float R[1][40][10], const float B[1][80], float Y[10][1][1][10], float Y_h[1][1][10], float Y_c[1][1][10] )
{
	/* LSTM 
	 * inputs: 
	 *   X = tensor_X
	 *   W = tensor_W
	 *   R = tensor_R
	 *   B = tensor_B
	 *   sequence_lens = 
	 *   initial_h = 
	 *   initial_c = 
	 *   P = 
	 * outputs: 
	 *   Y = tensor_Y
	 *   Y_h = tensor_Y_h
	 *   Y_c = tensor_Y_c
	 * attributes:
	 *   activations: Sigmoid Tanh Tanh 
	 * clip: off
	 * layout: 0
	 * (rest TBD):
	 */
	int hs = 10;
	int ds = 1;
	int bs = 1;
	int iidx = 0;
	int oidx = hs;
	int fidx = 2*hs;
	int cidx = 3*hs;
	int Rb = 4*hs;
	int sequence_lenght = 10;
	/* Forget gate */
	float ft[bs][hs];
	/* Input gate */
	float it[bs][hs];
	/* Cell gate */
	float ct[bs][hs];
	/* Output gate */
	float ot[bs][hs];

	memset(Y_h, 0, sizeof(*Y_h));
	memset(Y_c, 0, sizeof(*Y_c));

	for( int s=0; s<sequence_lenght; s++) {

		/* Forward lane */
		for( int b=0; b<bs; b++)
		for( int h=0; h<hs; h++) {
			ft[b][h]=0;
			it[b][h]=0;
			ct[b][h]=0;
			for( int i=0; i<ds; i++) {
				ft[b][h] += X[s][b][i]*W[0][fidx+h][i];
				it[b][h] += X[s][b][i]*W[0][iidx+h][i];
				ct[b][h] += X[s][b][i]*W[0][cidx+h][i];
			}
			for( int k=0; k<hs; k++) {
				ft[b][h] += Y_h[0][b][k]*R[0][fidx+h][k];
				ct[b][h] += Y_h[0][b][k]*R[0][cidx+h][k];
				it[b][h] += Y_h[0][b][k]*R[0][iidx+h][k];
			}
			ft[b][h] += B[0][fidx+h];
			ft[b][h] += B[0][Rb+fidx+h];
			it[b][h] += B[0][iidx+h];
			it[b][h] += B[0][Rb+iidx+h];
			ct[b][h] += B[0][cidx+h];
			ct[b][h] += B[0][Rb+cidx+h];
			ft[b][h] =1.0f/(1+expf(-ft[b][h]));
			it[b][h] =1.0f/(1+expf(-it[b][h]));
			ct[b][h] =tanh(ct[b][h]);
		}
		for( int b=0; b<bs; b++)
		for( int h=0; h<hs; h++) {
			/* Cell state */
			Y_c[0][b][h] = Y_c[0][b][h]*ft[b][h] + it[b][h]*ct[b][h];
			/* Output gate */
			ot[b][h]=0;
			for( int i=0; i<ds; i++)
				ot[b][h] += X[s][b][i]*W[0][oidx+h][i];
			for( int k=0; k<hs; k++)
				ot[b][h] += Y_h[0][b][k]*R[0][oidx+h][k];
			ot[b][h] += B[0][oidx+h];
			ot[b][h] += B[0][Rb+oidx+h];
			ot[b][h] =1.0f/(1+expf(-ot[b][h]));
		}
		/* Hidden state */
		for( int b=0; b<bs; b++)
		for( int h=0; h<hs; h++) {
			Y_h[0][b][h] = ot[b][h] * tanh(Y_c[0][b][h]);
			Y[s][0][b][h]= Y_h[0][b][h];
		}

	} /* sequences */
}


void entry(const float tensor_X[10][1][1], float tensor_Y_h[1][1][10]) {
	node_anonymous_LSTM_0( tensor_X, tensor_W, tensor_R, tensor_B, tu0.tensor_Y, tensor_Y_h, tensor_Y_c);
}
